define ("report_cmcompetency/grade_dialogue_cm",["jquery","core/notification","core/templates","core/modal_factory","core/modal_events","tool_lp/event_base","core/str","core/fragment"],function(a,b,c,d,e,f,g,h){var i=function(b,c,d,e){f.prototype.constructor.apply(this,[]);this._ratingOptions=b;this._showApplyGroup=c;this.contextid=d;this.display(a(e))};i.prototype=Object.create(f.prototype);i.prototype.modal=null;i.prototype._ratingOptions=null;i.prototype.contextid=null;i.prototype._afterRender=function(){var b=this._find("[data-action=\"save\"]"),c=this._find("[name=\"rating\"]"),d=this._find("[name=\"applygroup\"]");this._find("[data-action=\"cancel\"]").click(function(a){a.preventDefault();this._trigger("cancelled")}.bind(this));c.change(function(){var c=a(this);if(!c.val()){b.prop("disabled",!0)}else{b.prop("disabled",!1)}}).change();b.click(function(a){a.preventDefault();var b=c.val();if(!b){return}var e=d.prop("checked");if(!0!==e){e=!1}this._trigger("rated",{rating:b,applygroup:e})}.bind(this))};i.prototype.destroy=function(){this.modal.destroy()};i.prototype.display=function(a){return g.get_string("rate","tool_lp").then(function(b){return d.create({type:d.types.SAVE_CANCEL,title:b,body:"",large:!0,buttons:{save:b}},a).done(function(a){this.modal=a;this.modal.getRoot().on(e.shown,function(){this.modal.setBody(this._render())}.bind(this));this.modal.getRoot().on(e.hidden,function(){this._trigger("popupdestroyed");this.modal.destroy()}.bind(this));this.modal.getRoot().on(e.bodyRendered,function(){this.modal.getRoot().find("[data-groupname=buttonar]").addClass("hidden");this._afterRender()}.bind(this));return this.modal}.bind(this))}.bind(this)).fail(b.exception)};i.prototype._find=function(a){return this.modal.getRoot().find(a)};i.prototype._render=function(){var a={canGrade:this._canGrade?!0:!1,ratingOptions:JSON.stringify(this._ratingOptions),showapplygroup:this._showApplyGroup?!0:!1,contextid:this.contextid};return h.loadFragment("tool_cmcompetency","grade_cm",this.contextid,a)};return i});
//# sourceMappingURL=grade_dialogue_cm.min.js.map
